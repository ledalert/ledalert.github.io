\hypertarget{usart_8c}{}\section{src/usart.c File Reference}
\label{usart_8c}\index{src/usart.\+c@{src/usart.\+c}}


U\+S\+A\+R\+T H\+A\+L driver.  


{\ttfamily \#include \char`\"{}uart.\+h\char`\"{}}\\*
{\ttfamily \#include $<$math.\+h$>$}\\*
Include dependency graph for usart.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{usart_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{usart_8c_a6c89d4ecfd052df4b706797c6b35ee9a}{usart\+\_\+set\+\_\+defaults} (struct \hyperlink{structusart}{usart} $\ast$\hyperlink{structusart}{usart})
\begin{DoxyCompactList}\small\item\em Configure U\+S\+A\+R\+T to default values. \end{DoxyCompactList}\item 
void \hyperlink{usart_8c_abd17fc525b9c36f671bedf0729741976}{usart\+\_\+configure\+\_\+gpio} (struct \hyperlink{structusart}{usart} $\ast$\hyperlink{structusart}{usart})
\begin{DoxyCompactList}\small\item\em Configure U\+S\+A\+R\+T G\+P\+I\+O default values. \end{DoxyCompactList}\item 
void \hyperlink{usart_8c_a0e3103fc345dfb09aa255989c86805e8}{usart\+\_\+init} (struct \hyperlink{structusart}{usart} $\ast$\hyperlink{structusart}{usart}, enum \hyperlink{hw_8h_a3c02952100e7d051b77cdf060ca0ba9b}{hw\+\_\+init\+\_\+state} state)
\begin{DoxyCompactList}\small\item\em Init usart device. \end{DoxyCompactList}\item 
void \hyperlink{usart_8c_aeeebc4a9b5040f2c423773a4eea7a325}{usart\+\_\+blocking\+\_\+send} (struct \hyperlink{structusart}{usart} $\ast$\hyperlink{structusart}{usart}, volatile void $\ast$data, int length)
\begin{DoxyCompactList}\small\item\em Send data using blocking/polling method (no I\+R\+Q nor D\+M\+A) \end{DoxyCompactList}\item 
void \hyperlink{usart_8c_ad39a26176dc8964ea1999629b1fd71f3}{usart\+\_\+blocking\+\_\+strz} (struct \hyperlink{structusart}{usart} $\ast$\hyperlink{structusart}{usart}, volatile char $\ast$ptr)
\begin{DoxyCompactList}\small\item\em Send zero terminated string using blocking/polling method (no I\+R\+Q nor D\+M\+A) \end{DoxyCompactList}\item 
void \hyperlink{usart_8c_a3af22e4da85d1cc56e9635c288cfee98}{usart\+\_\+blocking\+\_\+int} (struct \hyperlink{structusart}{usart} $\ast$\hyperlink{structusart}{usart}, int data)
\begin{DoxyCompactList}\small\item\em Send formatted integer using blocking/polling method (no I\+R\+Q nor D\+M\+A) \end{DoxyCompactList}\item 
void \hyperlink{usart_8c_ab51e225534a49a351524b2b5f26707b5}{usart\+\_\+blocking\+\_\+int\+\_\+zp} (struct \hyperlink{structusart}{usart} $\ast$\hyperlink{structusart}{usart}, int data, int dp)
\begin{DoxyCompactList}\small\item\em Send a formatted int with zeropadding using blocking/polling method (no I\+R\+Q nor D\+M\+A) \end{DoxyCompactList}\item 
void \hyperlink{usart_8c_af3f4d75d88bd6796e15f0e756525ac2e}{usart\+\_\+blocking\+\_\+float} (struct \hyperlink{structusart}{usart} $\ast$\hyperlink{structusart}{usart}, float data)
\begin{DoxyCompactList}\small\item\em Send a formatted float using blocking/polling method (no I\+R\+Q nor D\+M\+A) \end{DoxyCompactList}\item 
void \hyperlink{usart_8c_ab8505b37986de5265d35fdaa3569b9af}{usart\+\_\+blocking\+\_\+tm} (struct \hyperlink{structusart}{usart} $\ast$\hyperlink{structusart}{usart}, struct \hyperlink{structsw__timer__system__time}{sw\+\_\+timer\+\_\+system\+\_\+time} $\ast$\hyperlink{structtm}{tm})
\begin{DoxyCompactList}\small\item\em Send broken down time using blocking/polling (no dma/irq) \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
U\+S\+A\+R\+T H\+A\+L driver. 



\subsection{Function Documentation}
\hypertarget{usart_8c_af3f4d75d88bd6796e15f0e756525ac2e}{}\index{usart.\+c@{usart.\+c}!usart\+\_\+blocking\+\_\+float@{usart\+\_\+blocking\+\_\+float}}
\index{usart\+\_\+blocking\+\_\+float@{usart\+\_\+blocking\+\_\+float}!usart.\+c@{usart.\+c}}
\subsubsection[{usart\+\_\+blocking\+\_\+float}]{\setlength{\rightskip}{0pt plus 5cm}void usart\+\_\+blocking\+\_\+float (
\begin{DoxyParamCaption}
\item[{struct {\bf usart} $\ast$}]{usart, }
\item[{float}]{data}
\end{DoxyParamCaption}
)}\label{usart_8c_af3f4d75d88bd6796e15f0e756525ac2e}


Send a formatted float using blocking/polling method (no I\+R\+Q nor D\+M\+A) 


\begin{DoxyParams}{Parameters}
{\em usart} & Pointer to U\+S\+A\+R\+T device \\
\hline
{\em data} & Floating point value to format and send \\
\hline
\end{DoxyParams}


Definition at line 137 of file usart.\+c.



References usart\+\_\+blocking\+\_\+int(), and usart\+\_\+blocking\+\_\+int\+\_\+zp().

\hypertarget{usart_8c_a3af22e4da85d1cc56e9635c288cfee98}{}\index{usart.\+c@{usart.\+c}!usart\+\_\+blocking\+\_\+int@{usart\+\_\+blocking\+\_\+int}}
\index{usart\+\_\+blocking\+\_\+int@{usart\+\_\+blocking\+\_\+int}!usart.\+c@{usart.\+c}}
\subsubsection[{usart\+\_\+blocking\+\_\+int}]{\setlength{\rightskip}{0pt plus 5cm}void usart\+\_\+blocking\+\_\+int (
\begin{DoxyParamCaption}
\item[{struct {\bf usart} $\ast$}]{usart, }
\item[{int}]{data}
\end{DoxyParamCaption}
)}\label{usart_8c_a3af22e4da85d1cc56e9635c288cfee98}


Send formatted integer using blocking/polling method (no I\+R\+Q nor D\+M\+A) 



Definition at line 90 of file usart.\+c.



Referenced by usart\+\_\+blocking\+\_\+float(), and usart\+\_\+blocking\+\_\+tm().

\hypertarget{usart_8c_ab51e225534a49a351524b2b5f26707b5}{}\index{usart.\+c@{usart.\+c}!usart\+\_\+blocking\+\_\+int\+\_\+zp@{usart\+\_\+blocking\+\_\+int\+\_\+zp}}
\index{usart\+\_\+blocking\+\_\+int\+\_\+zp@{usart\+\_\+blocking\+\_\+int\+\_\+zp}!usart.\+c@{usart.\+c}}
\subsubsection[{usart\+\_\+blocking\+\_\+int\+\_\+zp}]{\setlength{\rightskip}{0pt plus 5cm}void usart\+\_\+blocking\+\_\+int\+\_\+zp (
\begin{DoxyParamCaption}
\item[{struct {\bf usart} $\ast$}]{usart, }
\item[{int}]{data, }
\item[{int}]{dp}
\end{DoxyParamCaption}
)}\label{usart_8c_ab51e225534a49a351524b2b5f26707b5}


Send a formatted int with zeropadding using blocking/polling method (no I\+R\+Q nor D\+M\+A) 


\begin{DoxyParams}{Parameters}
{\em usart} & Pointer to U\+S\+A\+R\+T device \\
\hline
{\em data} & Integer value to format and send \\
\hline
{\em dp} & Number of digits to use \\
\hline
\end{DoxyParams}
pow() takes like 4kb of flash so avoid it here since we are just working with integers anyway 

Definition at line 114 of file usart.\+c.



Referenced by usart\+\_\+blocking\+\_\+float(), and usart\+\_\+blocking\+\_\+tm().

\hypertarget{usart_8c_aeeebc4a9b5040f2c423773a4eea7a325}{}\index{usart.\+c@{usart.\+c}!usart\+\_\+blocking\+\_\+send@{usart\+\_\+blocking\+\_\+send}}
\index{usart\+\_\+blocking\+\_\+send@{usart\+\_\+blocking\+\_\+send}!usart.\+c@{usart.\+c}}
\subsubsection[{usart\+\_\+blocking\+\_\+send}]{\setlength{\rightskip}{0pt plus 5cm}void usart\+\_\+blocking\+\_\+send (
\begin{DoxyParamCaption}
\item[{struct {\bf usart} $\ast$}]{usart, }
\item[{volatile void $\ast$}]{data, }
\item[{int}]{length}
\end{DoxyParamCaption}
)}\label{usart_8c_aeeebc4a9b5040f2c423773a4eea7a325}


Send data using blocking/polling method (no I\+R\+Q nor D\+M\+A) 



Definition at line 71 of file usart.\+c.

\hypertarget{usart_8c_ad39a26176dc8964ea1999629b1fd71f3}{}\index{usart.\+c@{usart.\+c}!usart\+\_\+blocking\+\_\+strz@{usart\+\_\+blocking\+\_\+strz}}
\index{usart\+\_\+blocking\+\_\+strz@{usart\+\_\+blocking\+\_\+strz}!usart.\+c@{usart.\+c}}
\subsubsection[{usart\+\_\+blocking\+\_\+strz}]{\setlength{\rightskip}{0pt plus 5cm}void usart\+\_\+blocking\+\_\+strz (
\begin{DoxyParamCaption}
\item[{struct {\bf usart} $\ast$}]{usart, }
\item[{volatile char $\ast$}]{ptr}
\end{DoxyParamCaption}
)}\label{usart_8c_ad39a26176dc8964ea1999629b1fd71f3}


Send zero terminated string using blocking/polling method (no I\+R\+Q nor D\+M\+A) 



Definition at line 82 of file usart.\+c.

\hypertarget{usart_8c_ab8505b37986de5265d35fdaa3569b9af}{}\index{usart.\+c@{usart.\+c}!usart\+\_\+blocking\+\_\+tm@{usart\+\_\+blocking\+\_\+tm}}
\index{usart\+\_\+blocking\+\_\+tm@{usart\+\_\+blocking\+\_\+tm}!usart.\+c@{usart.\+c}}
\subsubsection[{usart\+\_\+blocking\+\_\+tm}]{\setlength{\rightskip}{0pt plus 5cm}void usart\+\_\+blocking\+\_\+tm (
\begin{DoxyParamCaption}
\item[{struct {\bf usart} $\ast$}]{usart, }
\item[{struct {\bf sw\+\_\+timer\+\_\+system\+\_\+time} $\ast$}]{tm}
\end{DoxyParamCaption}
)}\label{usart_8c_ab8505b37986de5265d35fdaa3569b9af}


Send broken down time using blocking/polling (no dma/irq) 



Definition at line 146 of file usart.\+c.



References sw\+\_\+timer\+\_\+system\+\_\+time\+::epoch, sw\+\_\+timer\+\_\+system\+\_\+time\+::ms, time\+\_\+tm\+\_\+from\+\_\+epoch(), tm\+::tm\+\_\+hour, tm\+::tm\+\_\+mday, tm\+::tm\+\_\+min, tm\+::tm\+\_\+mon, tm\+::tm\+\_\+sec, tm\+::tm\+\_\+year, usart\+\_\+blocking\+\_\+int(), usart\+\_\+blocking\+\_\+int\+\_\+zp(), and usart\+\_\+blocking\+\_\+str.



Referenced by main().

\hypertarget{usart_8c_abd17fc525b9c36f671bedf0729741976}{}\index{usart.\+c@{usart.\+c}!usart\+\_\+configure\+\_\+gpio@{usart\+\_\+configure\+\_\+gpio}}
\index{usart\+\_\+configure\+\_\+gpio@{usart\+\_\+configure\+\_\+gpio}!usart.\+c@{usart.\+c}}
\subsubsection[{usart\+\_\+configure\+\_\+gpio}]{\setlength{\rightskip}{0pt plus 5cm}void usart\+\_\+configure\+\_\+gpio (
\begin{DoxyParamCaption}
\item[{struct {\bf usart} $\ast$}]{usart}
\end{DoxyParamCaption}
)}\label{usart_8c_abd17fc525b9c36f671bedf0729741976}


Configure U\+S\+A\+R\+T G\+P\+I\+O default values. 



Definition at line 24 of file usart.\+c.



References D\+E\+F\+A\+U\+L\+T.



Referenced by usart\+\_\+init().

\hypertarget{usart_8c_a0e3103fc345dfb09aa255989c86805e8}{}\index{usart.\+c@{usart.\+c}!usart\+\_\+init@{usart\+\_\+init}}
\index{usart\+\_\+init@{usart\+\_\+init}!usart.\+c@{usart.\+c}}
\subsubsection[{usart\+\_\+init}]{\setlength{\rightskip}{0pt plus 5cm}void usart\+\_\+init (
\begin{DoxyParamCaption}
\item[{struct {\bf usart} $\ast$}]{usart, }
\item[{enum {\bf hw\+\_\+init\+\_\+state}}]{state}
\end{DoxyParamCaption}
)}\label{usart_8c_a0e3103fc345dfb09aa255989c86805e8}


Init usart device. 

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000008}{Todo}]Check if we are inited already \end{DoxyRefDesc}


Definition at line 38 of file usart.\+c.



References H\+W\+\_\+\+I\+N\+I\+T\+\_\+\+P\+O\+S\+T\+\_\+\+I\+N\+I\+T, H\+W\+\_\+\+I\+N\+I\+T\+\_\+\+P\+R\+E\+\_\+\+N\+V\+I\+C, H\+W\+\_\+\+I\+N\+I\+T\+\_\+\+R\+C\+C, usart\+\_\+configure\+\_\+gpio(), and usart\+\_\+set\+\_\+defaults().



Referenced by hw\+\_\+init\+\_\+state().

\hypertarget{usart_8c_a6c89d4ecfd052df4b706797c6b35ee9a}{}\index{usart.\+c@{usart.\+c}!usart\+\_\+set\+\_\+defaults@{usart\+\_\+set\+\_\+defaults}}
\index{usart\+\_\+set\+\_\+defaults@{usart\+\_\+set\+\_\+defaults}!usart.\+c@{usart.\+c}}
\subsubsection[{usart\+\_\+set\+\_\+defaults}]{\setlength{\rightskip}{0pt plus 5cm}void usart\+\_\+set\+\_\+defaults (
\begin{DoxyParamCaption}
\item[{struct {\bf usart} $\ast$}]{usart}
\end{DoxyParamCaption}
)}\label{usart_8c_a6c89d4ecfd052df4b706797c6b35ee9a}


Configure U\+S\+A\+R\+T to default values. 



Definition at line 9 of file usart.\+c.



References D\+E\+F\+A\+U\+L\+T.



Referenced by usart\+\_\+init().

