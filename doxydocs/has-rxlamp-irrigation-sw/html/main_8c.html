<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Irrigation test system 1: src/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Irrigation test system 1
   </div>
   <div id="projectbrief">Code for using rxlamp v0.90 as irrigation controller</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Irrigation controller main file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="math_8h_source.html">math.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ws2812__macro_8h_source.html">ws2812_macro.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="usart__macro_8h_source.html">usart_macro.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dma__macro_8h_source.html">dma_macro.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="led__macro_8h_source.html">led_macro.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timer__macro_8h_source.html">timer_macro.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="systick__macro_8h_source.html">systick_macro.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="adc_8h_source.html">adc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="time_8h_source.html">time.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="filter_8h_source.html">filter.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="irrigation_8h_source.html">irrigation.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.c:</div>
<div class="dyncontent">
<div class="center"><img src="main_8c__incl.png" border="0" usemap="#src_2main_8c" alt=""/></div>
<map name="src_2main_8c" id="src_2main_8c">
<area shape="rect" id="node2" href="math_8h.html" title="Some math utilities. " alt="" coords="703,155,771,181"/><area shape="rect" id="node3" href="ws2812__macro_8h.html" title="Helper macros for ws2812. " alt="" coords="195,80,326,107"/><area shape="rect" id="node14" href="timer__macro_8h.html" title="Utility macros for timers. " alt="" coords="5,155,121,181"/><area shape="rect" id="node15" href="usart__macro_8h.html" title="Helper macros for USART. " alt="" coords="467,80,582,107"/><area shape="rect" id="node17" href="time_8h.html" title="Time keeping and converting include file. " alt="" coords="744,229,807,256"/><area shape="rect" id="node19" href="dma__macro_8h.html" title="Helper macros for DMA HAL. " alt="" coords="387,155,497,181"/><area shape="rect" id="node20" href="led__macro_8h.html" title="Helper macros for LED control. " alt="" coords="707,80,809,107"/><area shape="rect" id="node21" href="systick__macro_8h.html" title="Helper macros for systick HAL. " alt="" coords="947,80,1073,107"/><area shape="rect" id="node25" href="adc_8h.html" title="ADC HAL include. " alt="" coords="883,304,940,331"/><area shape="rect" id="node27" href="filter_8h.html" title="Filter functions for filtering sensor data. " alt="" coords="1097,80,1160,107"/><area shape="rect" id="node28" href="irrigation_8h.html" title="Irrigation main include file. " alt="" coords="833,80,923,107"/><area shape="rect" id="node4" href="ws2812_8h.html" title="WS2812 HAL include file. " alt="" coords="279,155,362,181"/><area shape="rect" id="node13" href="gpio__macro_8h.html" title="Helper macros for GPIO. " alt="" coords="146,155,255,181"/><area shape="rect" id="node5" href="gpio_8h.html" title="GPIO HAL includes. " alt="" coords="443,229,505,256"/><area shape="rect" id="node9" href="timer_8h.html" title="Timer HAL include file. " alt="" coords="249,229,317,256"/><area shape="rect" id="node11" href="dma_8h.html" title="DMA includes. " alt="" coords="373,304,436,331"/><area shape="rect" id="node6" href="hw_8h.html" title="Hardware abstraction layer include file. " alt="" coords="507,379,558,405"/><area shape="rect" id="node16" href="uart_8h.html" title="UART HAL Include file. " alt="" coords="521,155,581,181"/><area shape="rect" id="node22" href="systick_8h.html" title="systick HAL include " alt="" coords="971,155,1049,181"/></map>
</div>
</div>
<p><a href="main_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3c3fdab7e413cd726f82bfba92630a39"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>HW_PRE_INIT</b>(call,  obj)</td></tr>
<tr class="separator:a3c3fdab7e413cd726f82bfba92630a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa423cbe2bea57704cca655826b2338c1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa423cbe2bea57704cca655826b2338c1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>GPIO_PORT_INSTANCE</b> (GPIO_PA, GPIOA, RCC_GPIOA)</td></tr>
<tr class="separator:aa423cbe2bea57704cca655826b2338c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abebbe5a8f2ebcfc52329af1a2a452c32"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abebbe5a8f2ebcfc52329af1a2a452c32"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>GPIO_PORT_INSTANCE</b> (GPIO_PB, GPIOB, RCC_GPIOB)</td></tr>
<tr class="separator:abebbe5a8f2ebcfc52329af1a2a452c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af239d1be6128c2cf9470dddd0736206d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af239d1be6128c2cf9470dddd0736206d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>GPIO_PIN_NOCONF</b> (Serial_tx,&amp;GPIO_PA, GPIO_USART1_TX)</td></tr>
<tr class="separator:af239d1be6128c2cf9470dddd0736206d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e07380dc740e8c8320b9ecf6fc1bd6d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4e07380dc740e8c8320b9ecf6fc1bd6d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>USART_8N1</b> (Serial, USART1, RCC_USART1, 921600, 0,&amp;Serial_tx)</td></tr>
<tr class="separator:a4e07380dc740e8c8320b9ecf6fc1bd6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6e1a812398e2960f55569f1becf22f8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab6e1a812398e2960f55569f1becf22f8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DMA_INSTANCE</b> (Dma, DMA1, RCC_DMA1)</td></tr>
<tr class="separator:ab6e1a812398e2960f55569f1becf22f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aeeaba0bf350894e16dca95c3433371"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2aeeaba0bf350894e16dca95c3433371"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>GPIO_PIN_NOCONF</b> (StatusLED_pin,&amp;GPIO_PB, GPIO15)</td></tr>
<tr class="separator:a2aeeaba0bf350894e16dca95c3433371"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62bc4a3e73a3bda284d20e2d99aa9c3e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a62bc4a3e73a3bda284d20e2d99aa9c3e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>TIMER_NOCONF</b> (StatusLED_timer, TIM1, RCC_TIM1)</td></tr>
<tr class="separator:a62bc4a3e73a3bda284d20e2d99aa9c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65e33b62baadd843fc4d336930ffc80a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a65e33b62baadd843fc4d336930ffc80a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DMA_CHANNEL_NOCONF</b> (StatusLED_dma,&amp;Dma, DMA_CHANNEL6)</td></tr>
<tr class="separator:a65e33b62baadd843fc4d336930ffc80a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b692da9c42d4defd8814f963d1d2da0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4b692da9c42d4defd8814f963d1d2da0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>TIMER_CCR_NOCONF</b> (StatusLED_pwm,&amp;StatusLED_timer, TIM_OC3N,&amp;StatusLED_dma)</td></tr>
<tr class="separator:a4b692da9c42d4defd8814f963d1d2da0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3c78d4a91a7027ea6ec309a0fdf1a4d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad3c78d4a91a7027ea6ec309a0fdf1a4d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>WS2812_SIMPLE_CONF</b> (StatusLED,&amp;StatusLED_pin,&amp;StatusLED_pwm, 1)</td></tr>
<tr class="separator:ad3c78d4a91a7027ea6ec309a0fdf1a4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac01d8360f2847c41f234b2d6333879cc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac01d8360f2847c41f234b2d6333879cc"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>SYSTICK_AUTO_CONFIG</b> (Systick, 1000)</td></tr>
<tr class="separator:ac01d8360f2847c41f234b2d6333879cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f98adee46907f4bd29dc153ce25dcb7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1f98adee46907f4bd29dc153ce25dcb7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>GAMMA_LUT_8_8_E_INSTANCE</b> (LED_Gamma)</td></tr>
<tr class="separator:a1f98adee46907f4bd29dc153ce25dcb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabae29cd362c0001a2b417c9206cb330"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aabae29cd362c0001a2b417c9206cb330">hw_init_state</a> (enum <a class="el" href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9b">hw_init_state</a> state)</td></tr>
<tr class="memdesc:aabae29cd362c0001a2b417c9206cb330"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init hardware.  <a href="#aabae29cd362c0001a2b417c9206cb330">More...</a><br /></td></tr>
<tr class="separator:aabae29cd362c0001a2b417c9206cb330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdd94f850b193691f1bfc60c724b542a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#afdd94f850b193691f1bfc60c724b542a">sys_tick_handler</a> (void)</td></tr>
<tr class="memdesc:afdd94f850b193691f1bfc60c724b542a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Systick IRQ handler.  <a href="#afdd94f850b193691f1bfc60c724b542a">More...</a><br /></td></tr>
<tr class="separator:afdd94f850b193691f1bfc60c724b542a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a359616b69ef6be09a3cb5680893c25cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a359616b69ef6be09a3cb5680893c25cb">ms_sleep</a> (int time)</td></tr>
<tr class="memdesc:a359616b69ef6be09a3cb5680893c25cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sleep in millisecond durations.  <a href="#a359616b69ef6be09a3cb5680893c25cb">More...</a><br /></td></tr>
<tr class="separator:a359616b69ef6be09a3cb5680893c25cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42ca7c9b89c22fcd9ec9aeed3e96b6c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a42ca7c9b89c22fcd9ec9aeed3e96b6c4">get_system_time_blocking</a> (struct <a class="el" href="structsw__timer__system__time.html">sw_timer_system_time</a> *result)</td></tr>
<tr class="memdesc:a42ca7c9b89c22fcd9ec9aeed3e96b6c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get time, wait until an atomic reading was successful.  <a href="#a42ca7c9b89c22fcd9ec9aeed3e96b6c4">More...</a><br /></td></tr>
<tr class="separator:a42ca7c9b89c22fcd9ec9aeed3e96b6c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac10cd1ff6b8d3726905397fc86b44bb1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ac10cd1ff6b8d3726905397fc86b44bb1">set_status_color</a> (int r, int g, int b)</td></tr>
<tr class="memdesc:ac10cd1ff6b8d3726905397fc86b44bb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update status LED.  <a href="#ac10cd1ff6b8d3726905397fc86b44bb1">More...</a><br /></td></tr>
<tr class="separator:ac10cd1ff6b8d3726905397fc86b44bb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Application entry point.  <a href="#a840291bc02cba5474a4cb46a9b9566fe">More...</a><br /></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad6626ba12fbadd1981081605f892a7bb"><td class="memItemLeft" align="right" valign="top">volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ad6626ba12fbadd1981081605f892a7bb">sleep_ms</a> = 0</td></tr>
<tr class="memdesc:ad6626ba12fbadd1981081605f892a7bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds number of ms to sleep, counts down in <a class="el" href="main_8c.html#afdd94f850b193691f1bfc60c724b542a" title="Systick IRQ handler. ">sys_tick_handler()</a>  <a href="#ad6626ba12fbadd1981081605f892a7bb">More...</a><br /></td></tr>
<tr class="separator:ad6626ba12fbadd1981081605f892a7bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d39b8e4f9506f28e2bdff70929287f6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2d39b8e4f9506f28e2bdff70929287f6"></a>
volatile int&#160;</td><td class="memItemRight" valign="bottom"><b>NTC_filtered_value</b> = -1</td></tr>
<tr class="separator:a2d39b8e4f9506f28e2bdff70929287f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d12c8106f421683f94175dd1c572624"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9d12c8106f421683f94175dd1c572624"></a>
volatile struct <a class="el" href="structsw__timer__system__time.html">sw_timer_system_time</a>&#160;</td><td class="memItemRight" valign="bottom"><b>system_time</b> = {1420070400, 0}</td></tr>
<tr class="separator:a9d12c8106f421683f94175dd1c572624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a153e3e14841d1967017a21ab4feacc19"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a153e3e14841d1967017a21ab4feacc19"></a>
volatile bool&#160;</td><td class="memItemRight" valign="bottom"><b>system_time_updated</b> =0</td></tr>
<tr class="separator:a153e3e14841d1967017a21ab4feacc19"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Irrigation controller main file. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd><p class="startdd">systick, adc, moisture sensor, pwm output, filter </p>
<p class="enddd">explain port and rcc better</p>
</dd></dl>

<p>Definition in file <a class="el" href="main_8c_source.html">main.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a3c3fdab7e413cd726f82bfba92630a39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HW_PRE_INIT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">call, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">obj&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">call(obj, <a class="code" href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9baca0b4dbf0e3911b3edde56d700f76ecf">HW_INIT_RCC</a>);\</div>
<div class="line">    call(obj, <a class="code" href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9ba4e9b2d4b7e946d95c2e41f3de17035a0">HW_INIT_GPIO</a>);\</div>
<div class="line">    call(obj, <a class="code" href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9ba45012c00c17031e71a4f60ada04df07d">HW_INIT_PRE_NVIC</a>);\</div>
<div class="line">    call(obj, <a class="code" href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9ba3f137ea5dd6b2ac372bb6d175434b3fa">HW_INIT_NVIC</a>);\</div>
<div class="line">    call(obj, <a class="code" href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9bacf9b04dc351d9fc47482fcd5229eb201">HW_INIT_POST_INIT</a>);</div>
<div class="ttc" id="hw_8h_html_a3c02952100e7d051b77cdf060ca0ba9ba45012c00c17031e71a4f60ada04df07d"><div class="ttname"><a href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9ba45012c00c17031e71a4f60ada04df07d">HW_INIT_PRE_NVIC</a></div><div class="ttdoc">After GPIOs have been initialized we might want to do some stuff before NVIC. </div><div class="ttdef"><b>Definition:</b> <a href="hw_8h_source.html#l00045">hw.h:45</a></div></div>
<div class="ttc" id="hw_8h_html_a3c02952100e7d051b77cdf060ca0ba9ba3f137ea5dd6b2ac372bb6d175434b3fa"><div class="ttname"><a href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9ba3f137ea5dd6b2ac372bb6d175434b3fa">HW_INIT_NVIC</a></div><div class="ttdoc">After GPIO have been initialized all NVIC will be initialized. </div><div class="ttdef"><b>Definition:</b> <a href="hw_8h_source.html#l00048">hw.h:48</a></div></div>
<div class="ttc" id="hw_8h_html_a3c02952100e7d051b77cdf060ca0ba9baca0b4dbf0e3911b3edde56d700f76ecf"><div class="ttname"><a href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9baca0b4dbf0e3911b3edde56d700f76ecf">HW_INIT_RCC</a></div><div class="ttdoc">This is the first state entered and here hardware drivers may initialize any clocks needed...</div><div class="ttdef"><b>Definition:</b> <a href="hw_8h_source.html#l00036">hw.h:36</a></div></div>
<div class="ttc" id="hw_8h_html_a3c02952100e7d051b77cdf060ca0ba9bacf9b04dc351d9fc47482fcd5229eb201"><div class="ttname"><a href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9bacf9b04dc351d9fc47482fcd5229eb201">HW_INIT_POST_INIT</a></div><div class="ttdoc">After NVIC is initialized there might be more stuff todo such as setting up perhipheral settings...</div><div class="ttdef"><b>Definition:</b> <a href="hw_8h_source.html#l00051">hw.h:51</a></div></div>
<div class="ttc" id="hw_8h_html_a3c02952100e7d051b77cdf060ca0ba9ba4e9b2d4b7e946d95c2e41f3de17035a0"><div class="ttname"><a href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9ba4e9b2d4b7e946d95c2e41f3de17035a0">HW_INIT_GPIO</a></div><div class="ttdoc">After clocks have been initialized all GPIO will be initialized, this also puts pins to their default...</div><div class="ttdef"><b>Definition:</b> <a href="hw_8h_source.html#l00039">hw.h:39</a></div></div>
</div><!-- fragment -->
<p>Definition at line <a class="el" href="main_8c_source.html#l00016">16</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a42ca7c9b89c22fcd9ec9aeed3e96b6c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_system_time_blocking </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsw__timer__system__time.html">sw_timer_system_time</a> *&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get time, wait until an atomic reading was successful. </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00097">97</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00117">main()</a>.</p>

</div>
</div>
<a class="anchor" id="aabae29cd362c0001a2b417c9206cb330"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9b">hw_init_state</a> </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="hw_8h.html#a3c02952100e7d051b77cdf060ca0ba9b">hw_init_state</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Init hardware. </p>
<p>This function prototype calls all perhipherals with the state as argument. </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00064">64</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

<p>References <a class="el" href="usart_8c_source.html#l00038">usart_init()</a>, and <a class="el" href="ws2812_8c_source.html#l00040">ws2812_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Application entry point. </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00117">117</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

<p>References <a class="el" href="main_8c_source.html#l00097">get_system_time_blocking()</a>, <a class="el" href="hw_8c_source.html#l00018">hw_init()</a>, <a class="el" href="main_8c_source.html#l00091">ms_sleep()</a>, <a class="el" href="main_8c_source.html#l00110">set_status_color()</a>, <a class="el" href="uart_8h_source.html#l00011">usart_blocking_str</a>, and <a class="el" href="usart_8c_source.html#l00146">usart_blocking_tm()</a>.</p>

</div>
</div>
<a class="anchor" id="a359616b69ef6be09a3cb5680893c25cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ms_sleep </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sleep in millisecond durations. </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00091">91</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

<p>References <a class="el" href="main_8c_source.html#l00059">sleep_ms</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00117">main()</a>.</p>

</div>
</div>
<a class="anchor" id="ac10cd1ff6b8d3726905397fc86b44bb1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_status_color </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>g</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update status LED. </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00110">110</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

<p>References <a class="el" href="ws2812_8c_source.html#l00096">ws2812_set_led()</a>, and <a class="el" href="ws2812_8c_source.html#l00090">ws2812_update_blocking()</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00117">main()</a>.</p>

</div>
</div>
<a class="anchor" id="afdd94f850b193691f1bfc60c724b542a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_tick_handler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Systick IRQ handler. </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00077">77</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

<p>References <a class="el" href="time_8h_source.html#l00022">sw_timer_system_time::epoch</a>, <a class="el" href="time_8h_source.html#l00023">sw_timer_system_time::ms</a>, and <a class="el" href="main_8c_source.html#l00059">sleep_ms</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ad6626ba12fbadd1981081605f892a7bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile int sleep_ms = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds number of ms to sleep, counts down in <a class="el" href="main_8c.html#afdd94f850b193691f1bfc60c724b542a" title="Systick IRQ handler. ">sys_tick_handler()</a> </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00059">59</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00091">ms_sleep()</a>, and <a class="el" href="main_8c_source.html#l00077">sys_tick_handler()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 15 2015 22:42:01 for Irrigation test system 1 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
